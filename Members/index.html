
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Members | Pancake Robotics</title>
<link rel="icon" type="image/x-icon" href="https://pancakerobotics.co.uk/assets/images/chef_noah_icon.png">

<link href="https://db.onlinewebfonts.com/c/21949b025df9045160fda6566f635b36?family=SyrupSans-Regular" rel="stylesheet">
<link href="https://pancakerobotics.co.uk/assets/stylesheets/StyleSheet.css" rel="stylesheet">
<link href="https://pancakerobotics.co.uk/assets/stylesheets/LightModeStyles.css?" rel="stylesheet">
<script src="https://kit.fontawesome.com/78cf3ba70d.js" crossorigin="anonymous"></script>
<script src="https://cdn.tailwindcss.com"></script>
<style>
    .ExMember{background-color: #616161; color: #2b2b2b;}

    .blurred-box.ExMember{background-color: rgba(70, 70, 70, 0.4);}
    .light-mode .blurred-box.ExMember{background-color: rgba(185, 185, 185, 0.4);}

    .box-title2 {
      position: absolute;
      top: -16px;
      left: 24px;
      color: #0d0d0d;
      font-weight: bold;
      padding: 0.3rem 20px;
      border-radius: 8px;
      text-transform: uppercase;
      font-size: 20px;
      font-family: 'Maple Mono', monospace;
    }
</style>
</head>

<body>

<div class="circuit-bg"><svg id="honeySvg"></svg></div>

<div class="content relative">

<header class="flex flex-wrap justify-between items-center px-6 py-4 w-full z-50 relative blurred-bar">
  <h1 class="pancakeprintfont text-3xl font-bold accentText">
    <img src="https://pancakerobotics.co.uk/assets/images/chef_noah_icon.svg" alt="logo" class="inline w-8 h-8 mr-1 align-text-bottom" />
    Pancake Robotics - Members
  </h1>
  <h1></h1>
  <h1 class="MapleMonoFont text-xl sm:text-2xl font-bold text-pink-500 mt-2 sm:mt-0 complementText text-center">
    one pancake, many opportunities!
  </h1>
  <h1></h1>
</header>

<div id="navToggle" class="nav-toggle">
  <span></span>
  <span></span>
  <span></span>
</div>

<nav id="navMenu" class="nav-menu pancakeprintfont">
  <a href="https://pancakerobotics.co.uk"><i class="fa-solid fa-house"></i> Home</a>
  <a href="https://pancakerobotics.co.uk/Inventory"><i class="fa-solid fa-boxes-stacked"></i> Inventory</a>
  <a href="https://pancakerobotics.co.uk/Members"><i class="fa-solid fa-user-group"></i> Members</a>
  <a href="https://pancakerobotics.co.uk/History"><i class="fa-solid fa-book-bookmark"></i> History</a>
  <div class="nav-footer">
    <button id="theme-toggle" class="nav-toggle-btn"><i id="theme-toggle-icon" class="fas fa-moon"></i> Theme Toggle</button><br>
    <span id="n/a" style="color: rgba(0, 0, 0, 0);"><i id="n/aa" class="fas fa-moon"></i></span>
  </div>
</nav>


<main>
<section id="members" class="py-8 px-6">
  <div id="members-container">
  </div>
</section>
<br>
<footer class="blurred-bar">
  Pancake Robotics | QEGS Alford, UK | FTC UK & Ireland | Team 27880<br>
  <span style="font-size: 20px; opacity: 50%;">Website by Harry Herring</span>
</footer>
</main>
</div>

<script src="https://pancakerobotics.co.uk/assets/stylesheets/PageElements.js?"></script>

<script>
function getIconClass(platform) {
  const icons = {
    youtube: 'fab fa-youtube',
    twitter: 'fab fa-twitter',
    instagram: 'fab fa-instagram',
    linkedin: 'fab fa-linkedin',
    tiktok: 'fab fa-tiktok',
    github: 'fab fa-github',
    discord: 'fab fa-discord',
    film: 'fas fa-film',
    music: 'fas fa-music'
  };
  return icons[platform.toLowerCase()] || 'fas fa-link';
}

async function fetchMembers() {
  const url = `https://pancakerobotics.co.uk/assets/members.json?ts=${Date.now()}`;
  try {
    const response = await fetch(url);
    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }
    const members = await response.json();
    const container = document.getElementById('members-container');
    container.innerHTML = '';
    members.forEach(member => {
      const angle = Math.random() * 6 - 3;
      const isExMember = member.department === 'ExMember';
      const div = document.createElement('div');

      let nicknameHtml = '';
      const n = member.nicknames;
      if (Array.isArray(n)) {
        if (n.length === 1) {
          nicknameHtml = `<p class="text-gray-400 text-center"><span class="name-label">Nickname:</span> ${n[0]}</p>`;
        } else if (n.length > 1) {
          nicknameHtml = `<p class="text-gray-400 text-center"><span class="name-label">Nicknames:</span> ${n.join(', ')}</p>`;
        }
      } else if (typeof n === 'string' && n.trim()) {
        const parts = n.split(',').map(s => s.trim()).filter(Boolean);
        if (parts.length === 1) {
          nicknameHtml = `<p class="text-gray-400 text-center"><span class="name-label">Nickname:</span> ${parts[0]}</p>`;
        } else if (parts.length > 1) {
          nicknameHtml = `<p class="text-gray-400 text-center"><span class="name-label">Nicknames:</span> ${parts.join(', ')}</p>`;
        }
      }
      


      if (isExMember) {
        div.className = 'blurred-box mb-8 ExMember';
      } else {
        div.className = 'blurred-box mb-8';
      }


      div.innerHTML = `
        <div class="box-title2 ${isExMember ? 'ExMember' : member.department || ''}"><span>${member.name}</span></div>
        <div class="mt-4 flex flex-col sm:flex-row items-center gap-4">
          <img src="${member.avatar}" alt="${member.name}" class="rounded-lg object-cover flex-shrink-0" style="width: 180px; height: 180px;">
          <div class="flex-1 flex flex-col justify-center">
            <p class="text-gray-400 text-center">${member.description}</p>
            ${nicknameHtml}
            <p class="text-gray-400 text-center"><span class="role-label">Role:</span> ${member.role || 'N/A'}</p>
            <p class="text-gray-400 text-center"><span class="from-label">Member from:</span> ${member.from || 'N/A'}</p>
            <div class="mt-4 flex justify-center gap-4">
              ${Object.entries(member.social || {}).map(([platform, link]) => 
                `<a href="${link}" target="_blank" rel="noopener noreferrer" class="accentText"><i class="${getIconClass(platform)} text-3xl"></i></a>`
              ).join('')}
            </div>
          </div>
        </div>
      `;
      container.appendChild(div);
      const boxTitle = div.querySelector('.box-title2');
      const bgColor = getComputedStyle(boxTitle).backgroundColor;
      const roleLabel = div.querySelector('.role-label');
      if (roleLabel) roleLabel.style.color = bgColor;
      const fromLabel = div.querySelector('.from-label');
      if (fromLabel) fromLabel.style.color = bgColor;
      const nameLabel = div.querySelector('.name-label');
      if (nameLabel) nameLabel.style.color = bgColor;
    });
  } catch (error) {
    console.error('Error fetching members:', error);
    document.getElementById('members-container').innerHTML = '<p class="text-red-400">Failed to load members data. Please check the console for details.</p>';
  }
}

fetchMembers();
</script>

<script>
  (function() {
    const root = document.documentElement;
    const toggleBtn = document.getElementById('theme-toggle');
    const icon = document.getElementById('theme-toggle-icon');
    if (!toggleBtn || !icon) return;
    if (localStorage.getItem('theme') === 'light') {
      root.classList.add('light-mode');
      icon.classList.remove('fa-moon');
      icon.classList.add('fa-sun');
    }
    toggleBtn.addEventListener('click', function() {
      root.classList.toggle('light-mode');
      const isLight = root.classList.contains('light-mode');
      icon.classList.toggle('fa-moon', !isLight);
      icon.classList.toggle('fa-sun', isLight);
      localStorage.setItem('theme', isLight ? 'light' : 'dark');
    });
  })();

  (function() {
    const toggleBtn = document.getElementById('theme-toggle');
    function pokeSvg() {
      const honeySvg = document.getElementById('honeySvg');
      if (!honeySvg) return;
      const v = honeySvg.getAttribute('data-theme-poke') === '1' ? '0' : '1';
      honeySvg.setAttribute('data-theme-poke', v);
    }
    if (toggleBtn) {
      toggleBtn.addEventListener('click', function() {
        requestAnimationFrame(() => requestAnimationFrame(pokeSvg));
      });
    }
  })();
</script>

<script>
  // close nav menu when clicking outside it
  document.addEventListener('click', function(e) {
    const navMenu = document.getElementById('navMenu');
    const navToggle = document.getElementById('navToggle');
    if (navMenu && navToggle && navMenu.classList.contains('active')) {
      if (!navMenu.contains(e.target) && !navToggle.contains(e.target)) {
        navMenu.classList.remove('active');
        navToggle.classList.remove('active');
      }
    }
  });
</script>

</body>
</html>
